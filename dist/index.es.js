import{useRef as e,useState as r}from"react";import{jsxs as t,jsx as a}from"react/jsx-runtime";const n=({label:n,show:o,fetcher:s,containerClassName:c,audioClassName:d,buttonClassName:i})=>{const l=e(null),[u,f]=r(!1);return o?null:t("div",{className:c,children:[a("audio",{ref:l,controls:u,className:d}),a("button",{className:i,onClick:async()=>{try{if(!prompt)throw new Error("Prompt is required");const e=await s();if(!e.ok)throw new Error(await e.json());const r=new MediaSource;l.current.src=URL.createObjectURL(r),f(!0),r.addEventListener("sourceopen",(async()=>{const t=r.addSourceBuffer("audio/mpeg"),a=e.body.getReader(),n=[],o=()=>{if(!t.updating&&n.length>0){const e=n.shift();t.appendBuffer(e)}};let s;for(t.addEventListener("updateend",(()=>o()));!(s=await a.read()).done;){if(s.done)return r.endOfStream();n.push(s.value),o()}})),l.current.play()}catch(e){console.error(e)}},disabled:u,children:n})]})};export{n as default};
//# sourceMappingURL=index.es.js.map
