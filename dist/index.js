"use strict";var e=require("react"),r=require("react/jsx-runtime");module.exports=({label:t,show:a,fetcher:s,containerClassName:n,audioClassName:o,buttonClassName:c})=>{const u=e.useRef(null),[d,i]=e.useState(!1);return a?null:r.jsxs("div",{className:n,children:[r.jsx("audio",{ref:u,controls:d,className:o}),r.jsx("button",{className:c,onClick:async()=>{try{if(!prompt)throw new Error("Prompt is required");const e=await s();if(!e.ok)throw new Error(await e.json());const r=new MediaSource;u.current.src=URL.createObjectURL(r),i(!0),r.addEventListener("sourceopen",(async()=>{const t=r.addSourceBuffer("audio/mpeg"),a=e.body.getReader(),s=[],n=()=>{if(!t.updating&&s.length>0){const e=s.shift();t.appendBuffer(e)}};let o;for(t.addEventListener("updateend",(()=>n()));!(o=await a.read()).done;){if(o.done)return r.endOfStream();s.push(o.value),n()}})),u.current.play()}catch(e){console.error(e)}},disabled:d,children:t})]})};
//# sourceMappingURL=index.js.map
