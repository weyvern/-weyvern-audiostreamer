"use strict";var e=require("react"),r=require("react/jsx-runtime");module.exports=({label:t,loading:a,fetcher:n,containerClassName:s,audioClassName:o,buttonClassName:c})=>{const d=e.useRef(null),[i,u]=e.useState(!1);return a?null:r.jsxs("div",{className:s,children:[r.jsx("audio",{ref:d,controls:i,className:o}),r.jsx("button",{className:c,onClick:async()=>{try{if(!prompt)throw new Error("Prompt is required");const e=await n();if(!e.ok)throw new Error(await e.json());const r=new MediaSource;d.current.src=URL.createObjectURL(r),u(!0),r.addEventListener("sourceopen",(async()=>{const t=r.addSourceBuffer("audio/mpeg"),a=e.body.getReader(),n=[],s=()=>{if(!t.updating&&n.length>0){const e=n.shift();t.appendBuffer(e)}};let o;for(t.addEventListener("updateend",(()=>s()));!(o=await a.read()).done;){if(o.done)return r.endOfStream();n.push(o.value),s()}})),d.current.play()}catch(e){console.error(e)}},disabled:i,children:t})]})};
//# sourceMappingURL=index.js.map
